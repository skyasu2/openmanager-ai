# Test Strategy Guide

> OpenManager í…ŒìŠ¤íŠ¸ ì „ëµê³¼ ìš°ì„ ìˆœìœ„ë¥¼ ì •ì˜í•œ ê°€ì´ë“œ
> Owner: documentation
> Status: Active
> Doc type: How-to
> Last reviewed: 2026-02-22
> Canonical: docs/guides/testing/test-strategy.md
> Tags: testing,strategy,quality

---

## Overview

OpenManager AIì˜ ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì „ëµì€ **Local-First + Contract-First** ì…ë‹ˆë‹¤.

- ê¸°ë³¸ ê²€ì¦ ê²½ë¡œëŠ” `Vitest + MSW` ê¸°ë°˜ ë¡œì»¬ í…ŒìŠ¤íŠ¸
- ì™¸ë¶€ API/LLM ì‹¤í˜¸ì¶œì€ ìë™ íšŒê·€ì—ì„œ ì œì™¸
- PlaywrightëŠ” ë¡œì»¬ í•µì‹¬ ì‚¬ìš©ì í”Œë¡œìš° ê²€ì¦ì— í•œì •
- Playwright êµ¬ì„±(Chromium ë‹¨ì¼, DevTools ë¹„í™œì„±í™”, Vercel bypass header)ì€ ìœ ì§€í•˜ê³  ì‹¤í–‰ ì£¼ê¸°ë§Œ ì¡°ìœ¨

> í•µì‹¬ ì›ì¹™: ë¬´ë£Œ í‹°ì–´ë¥¼ ë³´í˜¸í•˜ë©´ì„œë„, íšŒê·€ë¥¼ ë¹ ë¥´ê²Œ íƒì§€í•œë‹¤.

---

## 1. Test Pyramid (ìš´ì˜ ê¸°ì¤€)

```
      ğŸ”º ì œí•œì  ìˆ˜ë™ ìŠ¤ëª¨í¬ (ì„ íƒ)
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ğŸ”ºğŸ”º ë¡œì»¬ í•µì‹¬ E2E (Playwright)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ğŸ”ºğŸ”ºğŸ”º ê³„ì•½/ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Vitest + MSW)
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### ë ˆì´ì–´ë³„ ì—­í• 

| ë ˆì´ì–´ | ë„êµ¬ | ëª©ì  | ê¸°ë³¸ ì‹¤í–‰ |
|------|------|------|-----------|
| ê³„ì•½/ë‹¨ìœ„ | Vitest, MSW, Zod | ìš”ì²­/ì‘ë‹µ í˜•ì‹, ìƒíƒœ ì „ì´, UI ë¡œì§ | í•­ìƒ |
| ë¡œì»¬ í•µì‹¬ E2E | Playwright | ê²ŒìŠ¤íŠ¸ ë¡œê·¸ì¸, ëŒ€ì‹œë³´ë“œ ë Œë”, í•µì‹¬ ìƒí˜¸ì‘ìš© | í•„ìš” ì‹œ |
| ìˆ˜ë™ ìŠ¤ëª¨í¬ | ë¸Œë¼ìš°ì € + health check | ë°°í¬ ì§í›„ ìµœì†Œ ìƒì¡´ í™•ì¸ | ì„ íƒ |

---

## 2. What We Test By Default

### í¬í•¨

- React ì»´í¬ë„ŒíŠ¸/í›… ìƒíƒœ ì „ì´
- AI ìš”ì²­ payload ê³„ì•½ (`messages`, `sessionId`, headers)
- AI ìŠ¤íŠ¸ë¦¼ ì´ë²¤íŠ¸ í˜•ì‹(SSE data event êµ¬ì¡°)
- ëŒ€ì‹œë³´ë“œ í•µì‹¬ ë Œë”ë§/ì ‘ê·¼ì„±/ì˜¤ë¥˜ í˜ì´ì§€

### ê¸°ë³¸ ì œì™¸

- PR/ë¡œì»¬ ìë™í™”ì—ì„œì˜ ì‹¤ LLM ì¶”ë¡  í˜¸ì¶œ
- Vercel í”„ë¡œë•ì…˜ URL ì§ê²© ìë™ E2E
- ì¥ì‹œê°„(ë¶„ ë‹¨ìœ„) ë„¤íŠ¸ì›Œí¬ ëŒ€ê¸° ê¸°ë°˜ í…ŒìŠ¤íŠ¸

---

## 3. Commands (í˜„ì¬ í‘œì¤€)

```bash
# ë¹ ë¥¸ ë¡œì»¬ íšŒê·€
npm run test:quick

# ê³„ì•½ í…ŒìŠ¤íŠ¸ ë¬¶ìŒ
npm run test:contract

# ë¡œì»¬ í•µì‹¬ E2E
npm run test:e2e:critical

# ê°œë°œ ì¤‘ ìµœì†Œ ê²Œì´íŠ¸
npm run test:gate

# ì „ì²´(í•„ìš” ì‹œ)
npm run validate:all
```

---

## 4. CI/Release Gate (ì‹¤í–‰ ì£¼ê¸° ì¡°ìœ¨)

### Push ê¸°ë³¸ ê²Œì´íŠ¸ (feature/develop)

1. `npm run test:quick`
2. `npm run type-check`
3. `npm run lint`
4. E2EëŠ” ê¸°ë³¸ ë¯¸ì‹¤í–‰ (í•„ìš” ì‹œ ìˆ˜ë™ `npm run test:e2e:critical`)

### Pull Request ê²Œì´íŠ¸ (main ë³‘í•© ì „)

1. `npm run test:gate`
2. `npm run test:e2e:critical`
3. `npm run test:cloud:essential` (Cloud Run ë³€ê²½ ì‹œ)

### ì •ê¸°/ìˆ˜ë™ Deep Gate (ì„ íƒ)

1. `npm run test:e2e:all`
2. `npm run test:e2e:external` (ì™¸ë¶€ ì˜ì¡´ ì‹œë‚˜ë¦¬ì˜¤ ì ê²€ ì‹œ)

---

## 5. Cost Guardrails

- ë¬´ë£Œ í‹°ì–´ ë³´í˜¸ë¥¼ ìœ„í•´ í…ŒìŠ¤íŠ¸ ê¸°ë³¸ê°’ì€ ì™¸ë¶€ ì„œë¹„ìŠ¤ í˜¸ì¶œ 0íšŒì— ê°€ê¹ê²Œ ìœ ì§€
- ì‹¤ì¶”ë¡ /ì‹¤í´ë¼ìš°ë“œ ê²€ì¦ì´ ê¼­ í•„ìš”í•˜ë©´ ìˆ˜ë™ 1íšŒ ìŠ¤ëª¨í¬ë¡œ ì œí•œ
- ìƒˆ í…ŒìŠ¤íŠ¸ ì‘ì„± ì‹œ "ì´ í…ŒìŠ¤íŠ¸ê°€ ì™¸ë¶€ í† í°/ìš”ê¸ˆì„ ì†Œë¹„í•˜ëŠ”ê°€"ë¥¼ ë¨¼ì € íŒë‹¨
- CI ì‚¬ìš©ëŸ‰ ê¸‰ì¦ì„ ë§‰ê¸° ìœ„í•´ E2EëŠ” PR/ë³‘í•© ì§ì „/ìˆ˜ë™ ê²€ì¦ì— ìš°ì„  ë°°ì¹˜

---

## 6. Flaky Guardrails (AI ë¹„ê²°ì •ì„± ëŒ€ì‘)

- AI ë‹µë³€ì˜ ì •í™• ë¬¸ì¥/ìˆ˜ì¹˜ ë¬¸ìì—´ ë§¤ì¹­(assert) ê¸ˆì§€
- E2Eì—ì„œëŠ” ë Œë”ë§ ì»¨í…Œì´ë„ˆ, ìƒíƒœ ì „ì´, ì˜¤ë¥˜ ë³µêµ¬ ë“± ì•ˆì • ì‹ í˜¸ë§Œ ê²€ì¦
- AI ì‘ë‹µ ê²€ì¦ì€ `test:contract` + MSW ëª¨í‚¹ìœ¼ë¡œ ìš°ì„  ì²˜ë¦¬
- ë™ì¼ ì‹œë‚˜ë¦¬ì˜¤ê°€ ë°˜ë³µ flakyë©´ E2Eì—ì„œ ì œê±°í•˜ê³  ê³„ì•½ í…ŒìŠ¤íŠ¸ë¡œ ì „í™˜

---

## Related Documents

- [E2E Testing Guide](./e2e-testing-guide.md)
- [Quick Start](../../QUICK-START.md)
- [AI Standards](../ai/ai-standards.md)
