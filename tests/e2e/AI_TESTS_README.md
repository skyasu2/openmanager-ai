# AI 관련 E2E 운영 메모

**OpenManager AI v8.1.0** | 최종 업데이트: 2026-02-21

---

## 현재 원칙

AI 관련 회귀는 기본적으로 **E2E가 아니라 계약 테스트(Vitest)** 로 검증합니다.

- 이유: 실추론 호출은 느리고 flaky하며 무료 티어를 소모함
- 자동화 목표: 요청/응답 형식, 상태 전이, 스트림 이벤트 형식 검증
- E2E 목표: AI UI가 열리고 닫히며 기본 상호작용이 깨지지 않는지 확인

---

## 현재 실행 경로

```bash
# AI/스트림 계약 테스트
npm run test:contract

# 로컬 E2E 핵심 (AI 사이드바 UI 포함)
npm run test:e2e:critical
```

---

## 비활성화/제거된 고부하 시나리오

아래와 같은 "실제 AI 추론 장시간 대기" 중심 시나리오는 자동 회귀에서 제거되었습니다.

- 프로덕션 URL 직격 AI 스트리밍 E2E
- 수동 NLQ 회귀를 자동 스크립트로 강제하는 흐름
- 120~180초 이상 대기를 전제로 한 테스트

필요 시 해당 검증은 운영 점검 창구에서 수동 1회 스모크로 수행합니다.

---

## 유지보수 체크리스트

1. 새 AI 기능 추가 시 먼저 계약 테스트를 작성한다.
2. E2E 추가가 필요하면 외부 API 없이 30초 내 종료 가능해야 한다.
3. flaky한 AI 시나리오는 즉시 계약 테스트로 환원한다.
